"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9072],{9613:function(e,t,r){r.d(t,{Zo:function(){return l},kt:function(){return f}});var n=r(9496);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var c=n.createContext({}),u=function(e){var t=n.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},l=function(e){var t=u(e.components);return n.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,s=e.mdxType,o=e.originalType,c=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),m=u(r),f=s,v=m["".concat(c,".").concat(f)]||m[f]||p[f]||o;return r?n.createElement(v,a(a({ref:t},l),{},{components:r})):n.createElement(v,a({ref:t},l))}));function f(e,t){var r=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var o=r.length,a=new Array(o);a[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:s,a[1]=i;for(var u=2;u<o;u++)a[u]=r[u];return n.createElement.apply(null,a)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},3914:function(e,t,r){r.r(t),r.d(t,{assets:function(){return l},contentTitle:function(){return c},default:function(){return f},frontMatter:function(){return i},metadata:function(){return u},toc:function(){return p}});var n=r(2182),s=r(9028),o=(r(9496),r(9613)),a=["components"],i={},c="Handling HTTP Requests",u={unversionedId:"serve/serve",id:"serve/serve",title:"Handling HTTP Requests",description:"To serve HTTP requests, the Divine Web Service Framework starts with a [WebServer], which accepts the request and",source:"@site/docs/serve/serve.md",sourceDirName:"serve",slug:"/serve/",permalink:"/WSF/docs/serve/",editUrl:"https://github.com/Divine-Software/WSF/tree/master/website/docs/serve/serve.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Transactions",permalink:"/WSF/docs/query/transactions"},next:{title:"HTTP Resources",permalink:"/WSF/docs/serve/resources"}},l={},p=[],m={toc:p};function f(e){var t=e.components,r=(0,s.Z)(e,a);return(0,o.kt)("wrapper",(0,n.Z)({},m,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"handling-http-requests"},"Handling HTTP Requests"),(0,o.kt)("p",null,"To serve HTTP requests, the Divine Web Service Framework starts with a ",(0,o.kt)("a",{parentName:"p",href:"/WSF/docs/api/classes/divine_web_service.WebServer"},"WebServer"),", which accepts the request and\ndelegates it to a registered ",(0,o.kt)("a",{parentName:"p",href:"/WSF/docs/api/classes/divine_web_service.WebService"},"WebService"),", possibly based on a path prefix. The service is then responsible for finding\na matching ",(0,o.kt)("a",{parentName:"p",href:"/WSF/docs/api/interfaces/divine_web_service.WebResource"},"WebResource")," based on the request path, and finally calls one of its methods, corresponding to the HTTP\nrequest method. It's also possible to intercept the request with a ",(0,o.kt)("a",{parentName:"p",href:"/WSF/docs/api/interfaces/divine_web_service.WebFilter"},"WebFilter"),", which can be used to customize both the\nrequest and the response before and after the resource handler processing."),(0,o.kt)("p",null,"So here is a small ",(0,o.kt)("em",{parentName:"p"},"Hello, World"),"-like example just to show how some these concepts fit together:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"import { WebArguments, WebResource, WebServer, WebService } from '@divine/web-service';\nimport { html } from '@divine/x4e';\nimport '@divine/uri-x4e-parser'; // Activate optional XML & HTML parsers\n\nclass HelloResource implements WebResource {\n    static path = RegExp('');\n\n    async GET(args: WebArguments) {\n        const name = args.string('?name', '');\n\n        return html`<form>\n            What's your name? <input name=name value=\"${name}\"> <input type=submit> <br>\n            ${name && `Hello, ${name}!`}\n        </form>`;\n    }\n}\n\n(async function main() {\n    const service = new WebService(null).addResource(HelloResource);\n\n    console.log(`Visit me at http://localhost:3333/`);\n    const server = new WebServer('localhost', 3333, service);\n    await server.start({ waitForStop: true });\n})();\n")),(0,o.kt)("p",null,"The WSF is more tailored towards building API services than serving browsers with HTML, but as you can see, it can\noutput markup just fine too \u2014 with all parameters properly escaped, naturally."))}f.isMDXComponent=!0}}]);